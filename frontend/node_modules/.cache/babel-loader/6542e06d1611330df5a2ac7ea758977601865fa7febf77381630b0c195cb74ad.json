{"ast":null,"code":"import dayjs from \"dayjs\";\nimport { AbstractParserWithWordBoundaryChecking } from \"../../../common/parsers/AbstractParserWithWordBoundary.js\";\nimport { assignSimilarDate, assignTheNextDay, implySimilarTime } from \"../../../utils/dayjs.js\";\nimport DECasualTimeParser from \"./DECasualTimeParser.js\";\nimport * as references from \"../../../common/casualReferences.js\";\nconst PATTERN = new RegExp(`(jetzt|heute|morgen|端bermorgen|uebermorgen|gestern|vorgestern|letzte\\\\s*nacht)` + `(?:\\\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?` + `(?=\\\\W|$)`, \"i\");\nconst DATE_GROUP = 1;\nconst TIME_GROUP = 2;\nexport default class DECasualDateParser extends AbstractParserWithWordBoundaryChecking {\n  innerPattern(context) {\n    return PATTERN;\n  }\n  innerExtract(context, match) {\n    let targetDate = dayjs(context.refDate);\n    const dateKeyword = (match[DATE_GROUP] || \"\").toLowerCase();\n    const timeKeyword = (match[TIME_GROUP] || \"\").toLowerCase();\n    let component = context.createParsingComponents();\n    switch (dateKeyword) {\n      case \"jetzt\":\n        component = references.now(context.reference);\n        break;\n      case \"heute\":\n        component = references.today(context.reference);\n        break;\n      case \"morgen\":\n        assignTheNextDay(component, targetDate);\n        break;\n      case \"端bermorgen\":\n      case \"uebermorgen\":\n        targetDate = targetDate.add(1, \"day\");\n        assignTheNextDay(component, targetDate);\n        break;\n      case \"gestern\":\n        targetDate = targetDate.add(-1, \"day\");\n        assignSimilarDate(component, targetDate);\n        implySimilarTime(component, targetDate);\n        break;\n      case \"vorgestern\":\n        targetDate = targetDate.add(-2, \"day\");\n        assignSimilarDate(component, targetDate);\n        implySimilarTime(component, targetDate);\n        break;\n      default:\n        if (dateKeyword.match(/letzte\\s*nacht/)) {\n          if (targetDate.hour() > 6) {\n            targetDate = targetDate.add(-1, \"day\");\n          }\n          assignSimilarDate(component, targetDate);\n          component.imply(\"hour\", 0);\n        }\n        break;\n    }\n    if (timeKeyword) {\n      component = DECasualTimeParser.extractTimeComponents(component, timeKeyword);\n    }\n    return component;\n  }\n}","map":{"version":3,"names":["dayjs","AbstractParserWithWordBoundaryChecking","assignSimilarDate","assignTheNextDay","implySimilarTime","DECasualTimeParser","references","PATTERN","RegExp","DATE_GROUP","TIME_GROUP","DECasualDateParser","innerPattern","context","innerExtract","match","targetDate","refDate","dateKeyword","toLowerCase","timeKeyword","component","createParsingComponents","now","reference","today","add","hour","imply","extractTimeComponents"],"sources":["/Users/mvikr/Projects/TaskApp/frontend/node_modules/chrono-node/src/locales/de/parsers/DECasualDateParser.ts"],"sourcesContent":["import { ParsingContext } from \"../../../chrono\";\nimport { ParsingComponents, ParsingResult } from \"../../../results\";\nimport dayjs from \"dayjs\";\nimport { AbstractParserWithWordBoundaryChecking } from \"../../../common/parsers/AbstractParserWithWordBoundary\";\nimport { assignSimilarDate, assignTheNextDay, implySimilarTime } from \"../../../utils/dayjs\";\nimport DECasualTimeParser from \"./DECasualTimeParser\";\nimport * as references from \"../../../common/casualReferences\";\n\nconst PATTERN = new RegExp(\n    `(jetzt|heute|morgen|端bermorgen|uebermorgen|gestern|vorgestern|letzte\\\\s*nacht)` +\n        `(?:\\\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?` +\n        `(?=\\\\W|$)`,\n    \"i\"\n);\n\nconst DATE_GROUP = 1;\nconst TIME_GROUP = 2;\n\nexport default class DECasualDateParser extends AbstractParserWithWordBoundaryChecking {\n    innerPattern(context: ParsingContext): RegExp {\n        return PATTERN;\n    }\n\n    innerExtract(context: ParsingContext, match: RegExpMatchArray): ParsingComponents | ParsingResult {\n        let targetDate = dayjs(context.refDate);\n        const dateKeyword = (match[DATE_GROUP] || \"\").toLowerCase();\n        const timeKeyword = (match[TIME_GROUP] || \"\").toLowerCase();\n\n        let component = context.createParsingComponents();\n        switch (dateKeyword) {\n            case \"jetzt\":\n                component = references.now(context.reference);\n                break;\n\n            case \"heute\":\n                component = references.today(context.reference);\n                break;\n\n            case \"morgen\":\n                assignTheNextDay(component, targetDate);\n                break;\n\n            case \"端bermorgen\":\n            case \"uebermorgen\":\n                targetDate = targetDate.add(1, \"day\");\n                assignTheNextDay(component, targetDate);\n                break;\n\n            case \"gestern\":\n                targetDate = targetDate.add(-1, \"day\");\n                assignSimilarDate(component, targetDate);\n                implySimilarTime(component, targetDate);\n                break;\n\n            case \"vorgestern\":\n                targetDate = targetDate.add(-2, \"day\");\n                assignSimilarDate(component, targetDate);\n                implySimilarTime(component, targetDate);\n                break;\n\n            default:\n                if (dateKeyword.match(/letzte\\s*nacht/)) {\n                    if (targetDate.hour() > 6) {\n                        targetDate = targetDate.add(-1, \"day\");\n                    }\n\n                    assignSimilarDate(component, targetDate);\n                    component.imply(\"hour\", 0);\n                }\n\n                break;\n        }\n\n        if (timeKeyword) {\n            component = DECasualTimeParser.extractTimeComponents(component, timeKeyword);\n        }\n\n        return component;\n    }\n}\n"],"mappings":"AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,sCAAsC,QAAQ,2DAAyD;AAChH,SAASC,iBAAiB,EAAEC,gBAAgB,EAAEC,gBAAgB,QAAQ,yBAAuB;AAC7F,OAAOC,kBAAkB,MAAM,yBAAuB;AACtD,OAAO,KAAKC,UAAU,MAAM,qCAAmC;AAE/D,MAAMC,OAAO,GAAG,IAAIC,MAAM,CACtB,gFAAgF,GAC5E,yEAAyE,GACzE,WAAW,EACf,GAAG,CACN;AAED,MAAMC,UAAU,GAAG,CAAC;AACpB,MAAMC,UAAU,GAAG,CAAC;AAEpB,eAAc,MAAOC,kBAAmB,SAAQV,sCAAsC;EAClFW,YAAYA,CAACC,OAAuB;IAChC,OAAON,OAAO;EAClB;EAEAO,YAAYA,CAACD,OAAuB,EAAEE,KAAuB;IACzD,IAAIC,UAAU,GAAGhB,KAAK,CAACa,OAAO,CAACI,OAAO,CAAC;IACvC,MAAMC,WAAW,GAAG,CAACH,KAAK,CAACN,UAAU,CAAC,IAAI,EAAE,EAAEU,WAAW,EAAE;IAC3D,MAAMC,WAAW,GAAG,CAACL,KAAK,CAACL,UAAU,CAAC,IAAI,EAAE,EAAES,WAAW,EAAE;IAE3D,IAAIE,SAAS,GAAGR,OAAO,CAACS,uBAAuB,EAAE;IACjD,QAAQJ,WAAW;MACf,KAAK,OAAO;QACRG,SAAS,GAAGf,UAAU,CAACiB,GAAG,CAACV,OAAO,CAACW,SAAS,CAAC;QAC7C;MAEJ,KAAK,OAAO;QACRH,SAAS,GAAGf,UAAU,CAACmB,KAAK,CAACZ,OAAO,CAACW,SAAS,CAAC;QAC/C;MAEJ,KAAK,QAAQ;QACTrB,gBAAgB,CAACkB,SAAS,EAAEL,UAAU,CAAC;QACvC;MAEJ,KAAK,YAAY;MACjB,KAAK,aAAa;QACdA,UAAU,GAAGA,UAAU,CAACU,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC;QACrCvB,gBAAgB,CAACkB,SAAS,EAAEL,UAAU,CAAC;QACvC;MAEJ,KAAK,SAAS;QACVA,UAAU,GAAGA,UAAU,CAACU,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;QACtCxB,iBAAiB,CAACmB,SAAS,EAAEL,UAAU,CAAC;QACxCZ,gBAAgB,CAACiB,SAAS,EAAEL,UAAU,CAAC;QACvC;MAEJ,KAAK,YAAY;QACbA,UAAU,GAAGA,UAAU,CAACU,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;QACtCxB,iBAAiB,CAACmB,SAAS,EAAEL,UAAU,CAAC;QACxCZ,gBAAgB,CAACiB,SAAS,EAAEL,UAAU,CAAC;QACvC;MAEJ;QACI,IAAIE,WAAW,CAACH,KAAK,CAAC,gBAAgB,CAAC,EAAE;UACrC,IAAIC,UAAU,CAACW,IAAI,EAAE,GAAG,CAAC,EAAE;YACvBX,UAAU,GAAGA,UAAU,CAACU,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;;UAG1CxB,iBAAiB,CAACmB,SAAS,EAAEL,UAAU,CAAC;UACxCK,SAAS,CAACO,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC;;QAG9B;;IAGR,IAAIR,WAAW,EAAE;MACbC,SAAS,GAAGhB,kBAAkB,CAACwB,qBAAqB,CAACR,SAAS,EAAED,WAAW,CAAC;;IAGhF,OAAOC,SAAS;EACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}